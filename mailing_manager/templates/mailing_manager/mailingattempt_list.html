{% extends "mailing_manager/base.html" %}

{% block title %}Статистика{% endblock %}

{% block content %}

<!--control button-->
<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <h1 class="h2">Запуски рассылок</h1>
</div>
<!--clients list-->
<div class="table-responsive small">
    <table class="table table-striped table-sm">
        <thead>
            <tr>
                <th scope="col">Дата</th>
                <th scope="col">Рассылка</th>
                <th scope="col">Статус</th>
                <th scope="col">Ответ сервера</th>
            </tr>
        </thead>
        <tbody>
            {% for mailingattempt in mailingattempt_list %}
            <tr>
                <td>{{ mailingattempt.date_attempt | date:"d.M.Y h:m:s" }}</td>
                <td>{{ mailingattempt.mailing }}</td>
                <td>{{ mailingattempt.get_status_display }}</td>
                <td>{{ mailingattempt.server_response }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <ul class="list-group list-group-flush">
        <li class="list-group-item">Всего попыток: {{ attempts_count }}</li>
        <li class="list-group-item">Успешных: {{ attempts_success_count }}</li>
        <li class="list-group-item">Не успешных: {{ attempts_error_count }}</li>
    </ul>
</div>

{% endblock %}